var $D=Object.defineProperty;var zD=(D,J)=>{for(var Q in J)$D(D,Q,{get:J[Q],enumerable:!0,configurable:!0,set:(Z)=>J[Q]=()=>Z})};var g=(D,J)=>()=>(D&&(J=D(D=0)),J);class E extends Error{constructor(D,J,Q){super(D);this.message=D,this.code=J,this.data=Q}}class x{constructor(D){if(this.listeners={},this.retainedEventArguments={},this.windowListeners={},D)console.warn(`Capacitor WebPlugin "${D.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=D}addListener(D,J){let Q=!1;if(!this.listeners[D])this.listeners[D]=[],Q=!0;this.listeners[D].push(J);const X=this.windowListeners[D];if(X&&!X.registered)this.addWindowListener(X);if(Q)this.sendRetainedArgumentsForEvent(D);const $=async()=>this.removeListener(D,J);return Promise.resolve({remove:$})}async removeAllListeners(){this.listeners={};for(let D in this.windowListeners)this.removeWindowListener(this.windowListeners[D]);this.windowListeners={}}notifyListeners(D,J,Q){const Z=this.listeners[D];if(!Z){if(Q){let X=this.retainedEventArguments[D];if(!X)X=[];X.push(J),this.retainedEventArguments[D]=X}return}Z.forEach((X)=>X(J))}hasListeners(D){return!!this.listeners[D].length}registerWindowListener(D,J){this.windowListeners[J]={registered:!1,windowEventName:D,pluginEventName:J,handler:(Q)=>{this.notifyListeners(J,Q)}}}unimplemented(D="not implemented"){return new k.Exception(D,H.Unimplemented)}unavailable(D="not available"){return new k.Exception(D,H.Unavailable)}async removeListener(D,J){const Q=this.listeners[D];if(!Q)return;const Z=Q.indexOf(J);if(this.listeners[D].splice(Z,1),!this.listeners[D].length)this.removeWindowListener(this.windowListeners[D])}addWindowListener(D){window.addEventListener(D.windowEventName,D.handler),D.registered=!0}removeWindowListener(D){if(!D)return;window.removeEventListener(D.windowEventName,D.handler),D.registered=!1}sendRetainedArgumentsForEvent(D){const J=this.retainedEventArguments[D];if(!J)return;delete this.retainedEventArguments[D],J.forEach((Q)=>{this.notifyListeners(D,Q)})}}class l extends x{async getCookies(){const D=document.cookie,J={};return D.split(";").forEach((Q)=>{if(Q.length<=0)return;let[Z,X]=Q.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");Z=c(Z).trim(),X=c(X).trim(),J[Z]=X}),J}async setCookie(D){try{const J=u(D.key),Q=u(D.value),Z=`; expires=${(D.expires||"").replace("expires=","")}`,X=(D.path||"/").replace("path=",""),$=D.url!=null&&D.url.length>0?`domain=${D.url}`:"";document.cookie=`${J}=${Q||""}${Z}; path=${X}; ${$};`}catch(J){return Promise.reject(J)}}async deleteCookie(D){try{document.cookie=`${D.key}=; Max-Age=0`}catch(J){return Promise.reject(J)}}async clearCookies(){try{const D=document.cookie.split(";")||[];for(let J of D)document.cookie=J.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date()).toUTCString()};path=/`)}catch(D){return Promise.reject(D)}}async clearAllCookies(){try{await this.clearCookies()}catch(D){return Promise.reject(D)}}}class s extends x{async request(D){const J=VD(D,D.webFetchExtra),Q=BD(D.params,D.shouldEncodeUrlParams),Z=Q?`${D.url}?${Q}`:D.url,X=await fetch(Z,J),$=X.headers.get("content-type")||"";let{responseType:z="text"}=X.ok?D:{};if($.includes("application/json"))z="json";let Y,A;switch(z){case"arraybuffer":case"blob":A=await X.blob(),Y=await AD(A);break;case"json":Y=await X.json();break;case"document":case"text":default:Y=await X.text()}const O={};return X.headers.forEach((h,W)=>{O[W]=h}),{data:Y,headers:O,status:X.status,url:X.url}}async get(D){return this.request(Object.assign(Object.assign({},D),{method:"GET"}))}async post(D){return this.request(Object.assign(Object.assign({},D),{method:"POST"}))}async put(D){return this.request(Object.assign(Object.assign({},D),{method:"PUT"}))}async patch(D){return this.request(Object.assign(Object.assign({},D),{method:"PATCH"}))}async delete(D){return this.request(Object.assign(Object.assign({},D),{method:"DELETE"}))}}var OD,KD,m,FD,WD,H,GD,TD,qD,k,I,MD,u,c,LD,AD,SD,BD,VD,HD;var N=g(()=>{/*! Capacitor: https://capacitorjs.com/ - MIT License */OD=(D)=>{const J=new Map;J.set("web",{name:"web"});const Q=D.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:J},Z=($,z)=>{Q.platforms.set($,z)},X=($)=>{if(Q.platforms.has($))Q.currentPlatform=Q.platforms.get($)};return Q.addPlatform=Z,Q.setPlatform=X,Q},KD=(D)=>D.CapacitorPlatforms=OD(D),m=KD(typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{}),FD=m.addPlatform,WD=m.setPlatform;(function(D){D.Unimplemented="UNIMPLEMENTED",D.Unavailable="UNAVAILABLE"})(H||(H={}));GD=(D)=>{var J,Q;if(D===null||D===void 0?void 0:D.androidBridge)return"android";else if((Q=(J=D===null||D===void 0?void 0:D.webkit)===null||J===void 0?void 0:J.messageHandlers)===null||Q===void 0?void 0:Q.bridge)return"ios";else return"web"},TD=(D)=>{var J,Q,Z,X,$;const z=D.CapacitorCustomPlatform||null,Y=D.Capacitor||{},A=Y.Plugins=Y.Plugins||{},O=D.CapacitorPlatforms,h=()=>{return z!==null?z.name:GD(D)},W=((J=O===null||O===void 0?void 0:O.currentPlatform)===null||J===void 0?void 0:J.getPlatform)||h,i=()=>W()!=="web",t=((Q=O===null||O===void 0?void 0:O.currentPlatform)===null||Q===void 0?void 0:Q.isNativePlatform)||i,n=(K)=>{const G=w.get(K);if(G===null||G===void 0?void 0:G.platforms.has(W()))return!0;if(f(K))return!0;return!1},o=((Z=O===null||O===void 0?void 0:O.currentPlatform)===null||Z===void 0?void 0:Z.isPluginAvailable)||n,a=(K)=>{var G;return(G=Y.PluginHeaders)===null||G===void 0?void 0:G.find((M)=>M.name===K)},f=((X=O===null||O===void 0?void 0:O.currentPlatform)===null||X===void 0?void 0:X.getPluginHeader)||a,e=(K)=>D.console.error(K),DD=(K,G,M)=>{return Promise.reject(`${M} does not have an implementation of "${G}".`)},w=new Map,JD=(K,G={})=>{const M=w.get(K);if(M)return console.warn(`Capacitor plugin "${K}" already registered. Cannot register plugins twice.`),M.proxy;const F=W(),L=f(K);let V;const XD=async()=>{if(!V&&F in G)V=typeof G[F]==="function"?V=await G[F]():V=G[F];else if(z!==null&&!V&&"web"in G)V=typeof G.web==="function"?V=await G.web():V=G.web;return V},YD=(T,q)=>{var B,U;if(L){const R=L===null||L===void 0?void 0:L.methods.find((S)=>q===S.name);if(R)if(R.rtype==="promise")return(S)=>Y.nativePromise(K,q.toString(),S);else return(S,y)=>Y.nativeCallback(K,q.toString(),S,y);else if(T)return(B=T[q])===null||B===void 0?void 0:B.bind(T)}else if(T)return(U=T[q])===null||U===void 0?void 0:U.bind(T);else throw new E(`"${K}" plugin is not implemented on ${F}`,H.Unimplemented)},C=(T)=>{let q;const B=(...U)=>{const R=XD().then((S)=>{const y=YD(S,T);if(y){const j=y(...U);return q=j===null||j===void 0?void 0:j.remove,j}else throw new E(`"${K}.${T}()" is not implemented on ${F}`,H.Unimplemented)});if(T==="addListener")R.remove=async()=>q();return R};return B.toString=()=>`${T.toString()}() { [capacitor code] }`,Object.defineProperty(B,"name",{value:T,writable:!1,configurable:!1}),B},P=C("addListener"),d=C("removeListener"),ZD=(T,q)=>{const B=P({eventName:T},q),U=async()=>{const S=await B;d({eventName:T,callbackId:S},q)},R=new Promise((S)=>B.then(()=>S({remove:U})));return R.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await U()},R},b=new Proxy({},{get(T,q){switch(q){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return L?ZD:P;case"removeListener":return d;default:return C(q)}}});return A[K]=b,w.set(K,{name:K,proxy:b,platforms:new Set([...Object.keys(G),...L?[F]:[]])}),b},QD=(($=O===null||O===void 0?void 0:O.currentPlatform)===null||$===void 0?void 0:$.registerPlugin)||JD;if(!Y.convertFileSrc)Y.convertFileSrc=(K)=>K;return Y.getPlatform=W,Y.handleError=e,Y.isNativePlatform=t,Y.isPluginAvailable=o,Y.pluginMethodNoop=DD,Y.registerPlugin=QD,Y.Exception=E,Y.DEBUG=!!Y.DEBUG,Y.isLoggingEnabled=!!Y.isLoggingEnabled,Y.platform=Y.getPlatform(),Y.isNative=Y.isNativePlatform(),Y},qD=(D)=>D.Capacitor=TD(D),k=qD(typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:typeof global!=="undefined"?global:{}),I=k.registerPlugin,MD=k.Plugins;u=(D)=>encodeURIComponent(D).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),c=(D)=>D.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);LD=I("CapacitorCookies",{web:()=>new l}),AD=async(D)=>new Promise((J,Q)=>{const Z=new FileReader;Z.onload=()=>{const X=Z.result;J(X.indexOf(",")>=0?X.split(",")[1]:X)},Z.onerror=(X)=>Q(X),Z.readAsDataURL(D)}),SD=(D={})=>{const J=Object.keys(D);return Object.keys(D).map((X)=>X.toLocaleLowerCase()).reduce((X,$,z)=>{return X[$]=D[J[z]],X},{})},BD=(D,J=!0)=>{if(!D)return null;return Object.entries(D).reduce((Z,X)=>{const[$,z]=X;let Y,A;if(Array.isArray(z))A="",z.forEach((O)=>{Y=J?encodeURIComponent(O):O,A+=`${$}=${Y}&`}),A.slice(0,-1);else Y=J?encodeURIComponent(z):z,A=`${$}=${Y}`;return`${Z}&${A}`},"").substr(1)},VD=(D,J={})=>{const Q=Object.assign({method:D.method||"GET",headers:D.headers},J),X=SD(D.headers)["content-type"]||"";if(typeof D.data==="string")Q.body=D.data;else if(X.includes("application/x-www-form-urlencoded")){const $=new URLSearchParams;for(let[z,Y]of Object.entries(D.data||{}))$.set(z,Y);Q.body=$.toString()}else if(X.includes("multipart/form-data")||D.data instanceof FormData){const $=new FormData;if(D.data instanceof FormData)D.data.forEach((Y,A)=>{$.append(A,Y)});else for(let Y of Object.keys(D.data))$.append(Y,D.data[Y]);Q.body=$;const z=new Headers(Q.headers);z.delete("content-type"),Q.headers=z}else if(X.includes("application/json")||typeof D.data==="object")Q.body=JSON.stringify(D.data);return Q};HD=I("CapacitorHttp",{web:()=>new s})});var r={};zD(r,{BrowserWeb:()=>{{return v}},Browser:()=>{{return UD}}});class v extends x{constructor(){super();this._lastWindow=null}async open(D){this._lastWindow=window.open(D.url,D.windowName||"_blank")}async close(){return new Promise((D,J)=>{if(this._lastWindow!=null)this._lastWindow.close(),this._lastWindow=null,D();else J("No active window to close!")})}}var UD;var p=g(()=>{N();UD=new v});N();var _=I("Browser",{web:()=>Promise.resolve().then(() => (p(),r)).then((D)=>new D.BrowserWeb)});var ID=async(D,J)=>{await _.open({...J,url:D})},hD=async()=>{await _.close()},wD=async(D)=>{return _.addListener("browserFinished",D)},CD=async(D)=>{return _.addListener("browserFinished",D)};export{ID as open_website,CD as listen_page_loaded,wD as listen_browser_finished,hD as close_browser};
